/// DTC (Diagnostic Trouble Code) Database
/// Contains definitions for 3000+ standard OBD-II codes
library;

/// DTC severity levels
enum DTCSeverity {
  info('Info', 'Informational - no immediate action required'),
  warning('Warning', 'Should be addressed soon'),
  critical('Critical', 'Requires immediate attention'),
  unknown('Unknown', 'Severity not determined');

  final String label;
  final String description;
  const DTCSeverity(this.label, this.description);
}

/// DTC definition with description and repair info
class DTCDefinition {
  final String code;
  final String description;
  final String? cause;
  final String? symptoms;
  final List<String> possibleFixes;
  final DTCSeverity severity;
  final String category;

  const DTCDefinition({
    required this.code,
    required this.description,
    this.cause,
    this.symptoms,
    this.possibleFixes = const [],
    this.severity = DTCSeverity.warning,
    this.category = 'General',
  });
}

/// DTC Database lookup service
class DTCDatabase {
  static final DTCDatabase _instance = DTCDatabase._internal();
  factory DTCDatabase() => _instance;
  DTCDatabase._internal();

  /// Lookup a DTC code and return its definition
  DTCDefinition? lookup(String code) {
    final normalizedCode = code.toUpperCase().trim();
    return _database[normalizedCode];
  }

  /// Get description for a code, or a default message if not found
  String getDescription(String code) {
    final def = lookup(code);
    return def?.description ?? 'Unknown diagnostic trouble code';
  }

  /// Search codes by keyword
  List<DTCDefinition> search(String keyword) {
    final query = keyword.toLowerCase();
    return _database.values
        .where((def) =>
            def.code.toLowerCase().contains(query) ||
            def.description.toLowerCase().contains(query) ||
            (def.cause?.toLowerCase().contains(query) ?? false))
        .toList();
  }

  /// Get all codes in a category
  List<DTCDefinition> getByCategory(String category) {
    return _database.values
        .where((def) => def.category == category)
        .toList();
  }

  /// The main DTC database
  static const Map<String, DTCDefinition> _database = {
    // ============================================
    // P0xxx - Generic Powertrain Codes
    // ============================================

    // Fuel and Air Metering
    'P0001': DTCDefinition(
      code: 'P0001',
      description: 'Fuel Volume Regulator Control Circuit/Open',
      cause: 'Faulty fuel volume regulator, wiring issues, or ECM problem',
      symptoms: 'Poor fuel economy, engine performance issues',
      possibleFixes: ['Check fuel volume regulator', 'Inspect wiring', 'Test ECM'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0002': DTCDefinition(
      code: 'P0002',
      description: 'Fuel Volume Regulator Control Circuit Range/Performance',
      cause: 'Fuel volume regulator malfunction or fuel pressure issues',
      symptoms: 'Engine hesitation, poor acceleration',
      possibleFixes: ['Replace fuel volume regulator', 'Check fuel pressure'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0003': DTCDefinition(
      code: 'P0003',
      description: 'Fuel Volume Regulator Control Circuit Low',
      cause: 'Short to ground in fuel volume regulator circuit',
      symptoms: 'Engine stalling, hard starting',
      possibleFixes: ['Repair wiring', 'Replace fuel volume regulator'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0004': DTCDefinition(
      code: 'P0004',
      description: 'Fuel Volume Regulator Control Circuit High',
      cause: 'Short to power in fuel volume regulator circuit',
      symptoms: 'Engine performance issues',
      possibleFixes: ['Repair wiring', 'Replace fuel volume regulator'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0010': DTCDefinition(
      code: 'P0010',
      description: 'Intake Camshaft Position Actuator Circuit (Bank 1)',
      cause: 'Faulty camshaft position actuator, oil flow issues, or wiring problem',
      symptoms: 'Rough idle, poor fuel economy, reduced power',
      possibleFixes: ['Check oil level and condition', 'Inspect actuator wiring', 'Replace camshaft actuator'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0011': DTCDefinition(
      code: 'P0011',
      description: 'Intake Camshaft Position Timing Over-Advanced (Bank 1)',
      cause: 'Incorrect camshaft timing, low oil pressure, or faulty VVT solenoid',
      symptoms: 'Rough idle, stalling, poor fuel economy',
      possibleFixes: ['Change engine oil', 'Replace VVT solenoid', 'Check timing chain'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0012': DTCDefinition(
      code: 'P0012',
      description: 'Intake Camshaft Position Timing Over-Retarded (Bank 1)',
      cause: 'Low oil pressure, faulty VVT solenoid, or timing chain issues',
      symptoms: 'Poor acceleration, rough idle',
      possibleFixes: ['Check oil level', 'Replace VVT solenoid', 'Inspect timing chain'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0013': DTCDefinition(
      code: 'P0013',
      description: 'Exhaust Camshaft Position Actuator Circuit (Bank 1)',
      cause: 'Faulty exhaust camshaft actuator or wiring issue',
      symptoms: 'Check engine light, rough running',
      possibleFixes: ['Inspect wiring', 'Replace camshaft actuator'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0014': DTCDefinition(
      code: 'P0014',
      description: 'Exhaust Camshaft Position Timing Over-Advanced (Bank 1)',
      cause: 'Incorrect exhaust camshaft timing',
      symptoms: 'Rough idle, reduced engine performance',
      possibleFixes: ['Change oil', 'Replace VVT solenoid', 'Check timing'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0015': DTCDefinition(
      code: 'P0015',
      description: 'Exhaust Camshaft Position Timing Over-Retarded (Bank 1)',
      cause: 'Timing chain stretch, faulty VVT solenoid',
      symptoms: 'Reduced power, rough idle',
      possibleFixes: ['Replace timing chain', 'Replace VVT solenoid'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0016': DTCDefinition(
      code: 'P0016',
      description: 'Crankshaft Position - Camshaft Position Correlation (Bank 1 Sensor A)',
      cause: 'Timing chain stretched, jumped timing, or faulty sensors',
      symptoms: 'Hard starting, rough running, no start condition',
      possibleFixes: ['Check timing chain/belt', 'Replace crank/cam sensors', 'Verify timing'],
      severity: DTCSeverity.critical,
      category: 'Camshaft',
    ),
    'P0017': DTCDefinition(
      code: 'P0017',
      description: 'Crankshaft Position - Camshaft Position Correlation (Bank 1 Sensor B)',
      cause: 'Timing issues between crankshaft and exhaust camshaft',
      symptoms: 'Engine runs rough, hard starting',
      possibleFixes: ['Check timing', 'Replace sensors', 'Inspect timing chain'],
      severity: DTCSeverity.critical,
      category: 'Camshaft',
    ),
    'P0018': DTCDefinition(
      code: 'P0018',
      description: 'Crankshaft Position - Camshaft Position Correlation (Bank 2 Sensor A)',
      cause: 'Bank 2 timing issues',
      symptoms: 'Rough running, misfires',
      possibleFixes: ['Check Bank 2 timing', 'Replace sensors'],
      severity: DTCSeverity.critical,
      category: 'Camshaft',
    ),
    'P0019': DTCDefinition(
      code: 'P0019',
      description: 'Crankshaft Position - Camshaft Position Correlation (Bank 2 Sensor B)',
      cause: 'Bank 2 exhaust camshaft timing issues',
      symptoms: 'Engine performance problems',
      possibleFixes: ['Verify timing', 'Replace sensors'],
      severity: DTCSeverity.critical,
      category: 'Camshaft',
    ),
    'P0020': DTCDefinition(
      code: 'P0020',
      description: 'Intake Camshaft Position Actuator Circuit (Bank 2)',
      cause: 'Faulty actuator or wiring on Bank 2',
      symptoms: 'Check engine light, performance issues',
      possibleFixes: ['Check wiring', 'Replace actuator'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0021': DTCDefinition(
      code: 'P0021',
      description: 'Intake Camshaft Position Timing Over-Advanced (Bank 2)',
      cause: 'VVT system malfunction on Bank 2',
      symptoms: 'Rough idle, poor fuel economy',
      possibleFixes: ['Change oil', 'Replace VVT solenoid'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),
    'P0022': DTCDefinition(
      code: 'P0022',
      description: 'Intake Camshaft Position Timing Over-Retarded (Bank 2)',
      cause: 'Low oil pressure or VVT solenoid failure',
      symptoms: 'Reduced performance',
      possibleFixes: ['Check oil', 'Replace VVT components'],
      severity: DTCSeverity.warning,
      category: 'Camshaft',
    ),

    // Fuel Trim Codes
    'P0030': DTCDefinition(
      code: 'P0030',
      description: 'HO2S Heater Control Circuit (Bank 1 Sensor 1)',
      cause: 'Faulty oxygen sensor heater, wiring issues, or blown fuse',
      symptoms: 'Poor fuel economy, failed emissions test',
      possibleFixes: ['Replace O2 sensor', 'Check fuse', 'Repair wiring'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0031': DTCDefinition(
      code: 'P0031',
      description: 'HO2S Heater Control Circuit Low (Bank 1 Sensor 1)',
      cause: 'Short to ground in O2 sensor heater circuit',
      symptoms: 'Check engine light, emissions failure',
      possibleFixes: ['Repair wiring', 'Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0032': DTCDefinition(
      code: 'P0032',
      description: 'HO2S Heater Control Circuit High (Bank 1 Sensor 1)',
      cause: 'Short to power in O2 sensor heater circuit',
      symptoms: 'Check engine light',
      possibleFixes: ['Repair wiring', 'Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0036': DTCDefinition(
      code: 'P0036',
      description: 'HO2S Heater Control Circuit (Bank 1 Sensor 2)',
      cause: 'Downstream O2 sensor heater failure',
      symptoms: 'Poor fuel economy',
      possibleFixes: ['Replace downstream O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0037': DTCDefinition(
      code: 'P0037',
      description: 'HO2S Heater Control Circuit Low (Bank 1 Sensor 2)',
      cause: 'Wiring short to ground',
      symptoms: 'Check engine light',
      possibleFixes: ['Repair wiring', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0038': DTCDefinition(
      code: 'P0038',
      description: 'HO2S Heater Control Circuit High (Bank 1 Sensor 2)',
      cause: 'Wiring short to power',
      symptoms: 'Check engine light',
      possibleFixes: ['Repair wiring', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),

    // MAF/MAP Sensor Codes
    'P0100': DTCDefinition(
      code: 'P0100',
      description: 'Mass Air Flow Circuit Malfunction',
      cause: 'Faulty MAF sensor, air leaks, or wiring issues',
      symptoms: 'Poor acceleration, rough idle, stalling',
      possibleFixes: ['Clean MAF sensor', 'Check for air leaks', 'Replace MAF sensor'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0101': DTCDefinition(
      code: 'P0101',
      description: 'Mass Air Flow Circuit Range/Performance',
      cause: 'Dirty MAF sensor, vacuum leaks, or restricted air filter',
      symptoms: 'Hesitation, poor fuel economy, rough idle',
      possibleFixes: ['Clean MAF sensor', 'Replace air filter', 'Check for vacuum leaks'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0102': DTCDefinition(
      code: 'P0102',
      description: 'Mass Air Flow Circuit Low',
      cause: 'MAF sensor signal too low, vacuum leak, or sensor failure',
      symptoms: 'Stalling, poor acceleration',
      possibleFixes: ['Check wiring', 'Replace MAF sensor', 'Check for air leaks'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0103': DTCDefinition(
      code: 'P0103',
      description: 'Mass Air Flow Circuit High',
      cause: 'MAF sensor signal too high, wiring short',
      symptoms: 'Rich running condition, black smoke',
      possibleFixes: ['Replace MAF sensor', 'Repair wiring'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0104': DTCDefinition(
      code: 'P0104',
      description: 'Mass Air Flow Circuit Intermittent',
      cause: 'Loose connection, damaged wiring',
      symptoms: 'Intermittent performance issues',
      possibleFixes: ['Check connections', 'Repair wiring'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0105': DTCDefinition(
      code: 'P0105',
      description: 'Manifold Absolute Pressure Circuit Malfunction',
      cause: 'Faulty MAP sensor or vacuum leak',
      symptoms: 'Rough idle, poor fuel economy',
      possibleFixes: ['Replace MAP sensor', 'Check vacuum lines'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0106': DTCDefinition(
      code: 'P0106',
      description: 'Manifold Absolute Pressure Circuit Range/Performance',
      cause: 'MAP sensor reading out of range, vacuum leak',
      symptoms: 'Hesitation, stalling',
      possibleFixes: ['Check vacuum hoses', 'Replace MAP sensor'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0107': DTCDefinition(
      code: 'P0107',
      description: 'Manifold Absolute Pressure Circuit Low',
      cause: 'MAP sensor signal too low',
      symptoms: 'Poor performance',
      possibleFixes: ['Check wiring', 'Replace MAP sensor'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0108': DTCDefinition(
      code: 'P0108',
      description: 'Manifold Absolute Pressure Circuit High',
      cause: 'MAP sensor signal too high',
      symptoms: 'Rich running, black smoke',
      possibleFixes: ['Replace MAP sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0110': DTCDefinition(
      code: 'P0110',
      description: 'Intake Air Temperature Circuit Malfunction',
      cause: 'Faulty IAT sensor or wiring',
      symptoms: 'Hard starting when cold, poor fuel economy',
      possibleFixes: ['Replace IAT sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0111': DTCDefinition(
      code: 'P0111',
      description: 'Intake Air Temperature Circuit Range/Performance',
      cause: 'IAT sensor reading out of expected range',
      symptoms: 'Performance issues',
      possibleFixes: ['Replace IAT sensor'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0112': DTCDefinition(
      code: 'P0112',
      description: 'Intake Air Temperature Circuit Low',
      cause: 'Short to ground or faulty sensor',
      symptoms: 'Rich running condition',
      possibleFixes: ['Check wiring', 'Replace IAT sensor'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0113': DTCDefinition(
      code: 'P0113',
      description: 'Intake Air Temperature Circuit High',
      cause: 'Open circuit or faulty sensor',
      symptoms: 'Lean running condition',
      possibleFixes: ['Check wiring', 'Replace IAT sensor'],
      severity: DTCSeverity.warning,
      category: 'Air/Fuel',
    ),
    'P0115': DTCDefinition(
      code: 'P0115',
      description: 'Engine Coolant Temperature Circuit Malfunction',
      cause: 'Faulty ECT sensor or wiring',
      symptoms: 'Poor fuel economy, hard starting',
      possibleFixes: ['Replace ECT sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Cooling System',
    ),
    'P0116': DTCDefinition(
      code: 'P0116',
      description: 'Engine Coolant Temperature Circuit Range/Performance',
      cause: 'ECT sensor reading incorrect for conditions',
      symptoms: 'Cooling fan issues, poor fuel economy',
      possibleFixes: ['Replace thermostat', 'Replace ECT sensor'],
      severity: DTCSeverity.warning,
      category: 'Cooling System',
    ),
    'P0117': DTCDefinition(
      code: 'P0117',
      description: 'Engine Coolant Temperature Circuit Low',
      cause: 'Short to ground in ECT circuit',
      symptoms: 'Cooling fan always on',
      possibleFixes: ['Check wiring', 'Replace ECT sensor'],
      severity: DTCSeverity.warning,
      category: 'Cooling System',
    ),
    'P0118': DTCDefinition(
      code: 'P0118',
      description: 'Engine Coolant Temperature Circuit High',
      cause: 'Open circuit or sensor failure',
      symptoms: 'Rich running, poor cold start',
      possibleFixes: ['Check wiring', 'Replace ECT sensor'],
      severity: DTCSeverity.warning,
      category: 'Cooling System',
    ),
    'P0120': DTCDefinition(
      code: 'P0120',
      description: 'Throttle Position Sensor Circuit Malfunction',
      cause: 'Faulty TPS or wiring issue',
      symptoms: 'Erratic acceleration, stalling',
      possibleFixes: ['Replace TPS', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Throttle',
    ),
    'P0121': DTCDefinition(
      code: 'P0121',
      description: 'Throttle Position Sensor Circuit Range/Performance',
      cause: 'TPS signal out of expected range',
      symptoms: 'Hesitation, surging',
      possibleFixes: ['Replace TPS', 'Clean throttle body'],
      severity: DTCSeverity.warning,
      category: 'Throttle',
    ),
    'P0122': DTCDefinition(
      code: 'P0122',
      description: 'Throttle Position Sensor Circuit Low',
      cause: 'Short to ground or sensor failure',
      symptoms: 'Limited acceleration, limp mode',
      possibleFixes: ['Check wiring', 'Replace TPS'],
      severity: DTCSeverity.warning,
      category: 'Throttle',
    ),
    'P0123': DTCDefinition(
      code: 'P0123',
      description: 'Throttle Position Sensor Circuit High',
      cause: 'Short to power or sensor failure',
      symptoms: 'High idle, acceleration issues',
      possibleFixes: ['Check wiring', 'Replace TPS'],
      severity: DTCSeverity.warning,
      category: 'Throttle',
    ),
    'P0125': DTCDefinition(
      code: 'P0125',
      description: 'Insufficient Coolant Temperature for Closed Loop Fuel Control',
      cause: 'Thermostat stuck open, ECT sensor issue',
      symptoms: 'Poor fuel economy, extended warm-up time',
      possibleFixes: ['Replace thermostat', 'Check ECT sensor'],
      severity: DTCSeverity.warning,
      category: 'Cooling System',
    ),
    'P0128': DTCDefinition(
      code: 'P0128',
      description: 'Coolant Thermostat (Coolant Temperature Below Thermostat Regulating Temperature)',
      cause: 'Thermostat stuck open',
      symptoms: 'Poor heater output, poor fuel economy',
      possibleFixes: ['Replace thermostat'],
      severity: DTCSeverity.warning,
      category: 'Cooling System',
    ),
    'P0130': DTCDefinition(
      code: 'P0130',
      description: 'O2 Sensor Circuit Malfunction (Bank 1 Sensor 1)',
      cause: 'Faulty O2 sensor, wiring, or exhaust leak',
      symptoms: 'Poor fuel economy, failed emissions',
      possibleFixes: ['Replace O2 sensor', 'Check wiring', 'Check for exhaust leaks'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0131': DTCDefinition(
      code: 'P0131',
      description: 'O2 Sensor Circuit Low Voltage (Bank 1 Sensor 1)',
      cause: 'Lean condition or faulty sensor',
      symptoms: 'Poor performance, high fuel consumption',
      possibleFixes: ['Check for vacuum leaks', 'Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0132': DTCDefinition(
      code: 'P0132',
      description: 'O2 Sensor Circuit High Voltage (Bank 1 Sensor 1)',
      cause: 'Rich condition or faulty sensor',
      symptoms: 'Black smoke, poor fuel economy',
      possibleFixes: ['Check fuel system', 'Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0133': DTCDefinition(
      code: 'P0133',
      description: 'O2 Sensor Circuit Slow Response (Bank 1 Sensor 1)',
      cause: 'Aging O2 sensor or contamination',
      symptoms: 'Poor fuel economy, emissions failure',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0134': DTCDefinition(
      code: 'P0134',
      description: 'O2 Sensor Circuit No Activity Detected (Bank 1 Sensor 1)',
      cause: 'O2 sensor not switching, heater failure',
      symptoms: 'Poor fuel economy',
      possibleFixes: ['Replace O2 sensor', 'Check heater circuit'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0135': DTCDefinition(
      code: 'P0135',
      description: 'O2 Sensor Heater Circuit Malfunction (Bank 1 Sensor 1)',
      cause: 'Faulty heater element or wiring',
      symptoms: 'Extended warm-up emissions',
      possibleFixes: ['Replace O2 sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0136': DTCDefinition(
      code: 'P0136',
      description: 'O2 Sensor Circuit Malfunction (Bank 1 Sensor 2)',
      cause: 'Downstream O2 sensor failure',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace downstream O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0137': DTCDefinition(
      code: 'P0137',
      description: 'O2 Sensor Circuit Low Voltage (Bank 1 Sensor 2)',
      cause: 'Catalyst efficiency issue or sensor failure',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace sensor', 'Check catalytic converter'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0138': DTCDefinition(
      code: 'P0138',
      description: 'O2 Sensor Circuit High Voltage (Bank 1 Sensor 2)',
      cause: 'Sensor failure or wiring short',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0139': DTCDefinition(
      code: 'P0139',
      description: 'O2 Sensor Circuit Slow Response (Bank 1 Sensor 2)',
      cause: 'Aging sensor',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0140': DTCDefinition(
      code: 'P0140',
      description: 'O2 Sensor Circuit No Activity Detected (Bank 1 Sensor 2)',
      cause: 'Sensor failure',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0141': DTCDefinition(
      code: 'P0141',
      description: 'O2 Sensor Heater Circuit Malfunction (Bank 1 Sensor 2)',
      cause: 'Heater element failure',
      symptoms: 'Emissions issues',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0150': DTCDefinition(
      code: 'P0150',
      description: 'O2 Sensor Circuit Malfunction (Bank 2 Sensor 1)',
      cause: 'Faulty O2 sensor Bank 2',
      symptoms: 'Poor performance, emissions failure',
      possibleFixes: ['Replace Bank 2 upstream O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0151': DTCDefinition(
      code: 'P0151',
      description: 'O2 Sensor Circuit Low Voltage (Bank 2 Sensor 1)',
      cause: 'Lean condition or sensor failure',
      symptoms: 'Performance issues',
      possibleFixes: ['Check for vacuum leaks', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0152': DTCDefinition(
      code: 'P0152',
      description: 'O2 Sensor Circuit High Voltage (Bank 2 Sensor 1)',
      cause: 'Rich condition or sensor failure',
      symptoms: 'Black smoke',
      possibleFixes: ['Check fuel system', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0153': DTCDefinition(
      code: 'P0153',
      description: 'O2 Sensor Circuit Slow Response (Bank 2 Sensor 1)',
      cause: 'Aging sensor',
      symptoms: 'Poor fuel economy',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0154': DTCDefinition(
      code: 'P0154',
      description: 'O2 Sensor Circuit No Activity Detected (Bank 2 Sensor 1)',
      cause: 'Sensor failure',
      symptoms: 'Poor performance',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0155': DTCDefinition(
      code: 'P0155',
      description: 'O2 Sensor Heater Circuit Malfunction (Bank 2 Sensor 1)',
      cause: 'Heater circuit issue',
      symptoms: 'Extended warmup emissions',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0156': DTCDefinition(
      code: 'P0156',
      description: 'O2 Sensor Circuit Malfunction (Bank 2 Sensor 2)',
      cause: 'Downstream sensor failure',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace downstream O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0157': DTCDefinition(
      code: 'P0157',
      description: 'O2 Sensor Circuit Low Voltage (Bank 2 Sensor 2)',
      cause: 'Sensor or catalyst issue',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace sensor', 'Check catalyst'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0158': DTCDefinition(
      code: 'P0158',
      description: 'O2 Sensor Circuit High Voltage (Bank 2 Sensor 2)',
      cause: 'Sensor failure',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0159': DTCDefinition(
      code: 'P0159',
      description: 'O2 Sensor Circuit Slow Response (Bank 2 Sensor 2)',
      cause: 'Aging sensor',
      symptoms: 'Emissions issues',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0160': DTCDefinition(
      code: 'P0160',
      description: 'O2 Sensor Circuit No Activity Detected (Bank 2 Sensor 2)',
      cause: 'Sensor not responding',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0161': DTCDefinition(
      code: 'P0161',
      description: 'O2 Sensor Heater Circuit Malfunction (Bank 2 Sensor 2)',
      cause: 'Heater failure',
      symptoms: 'Emissions issues',
      possibleFixes: ['Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Oxygen Sensor',
    ),
    'P0170': DTCDefinition(
      code: 'P0170',
      description: 'Fuel Trim Malfunction (Bank 1)',
      cause: 'Fuel system unable to maintain proper mixture',
      symptoms: 'Poor fuel economy, rough idle',
      possibleFixes: ['Check for vacuum leaks', 'Clean fuel injectors', 'Replace O2 sensors'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0171': DTCDefinition(
      code: 'P0171',
      description: 'System Too Lean (Bank 1)',
      cause: 'Vacuum leak, weak fuel pump, clogged fuel filter, faulty MAF sensor',
      symptoms: 'Rough idle, hesitation, poor fuel economy, possible stalling',
      possibleFixes: ['Check for vacuum leaks', 'Clean MAF sensor', 'Check fuel pressure', 'Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0172': DTCDefinition(
      code: 'P0172',
      description: 'System Too Rich (Bank 1)',
      cause: 'Leaking fuel injector, faulty fuel pressure regulator, stuck open EVAP purge valve',
      symptoms: 'Black smoke, poor fuel economy, rough idle, spark plug fouling',
      possibleFixes: ['Check fuel pressure', 'Inspect injectors', 'Check EVAP system', 'Replace O2 sensor'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0173': DTCDefinition(
      code: 'P0173',
      description: 'Fuel Trim Malfunction (Bank 2)',
      cause: 'Fuel system issues on Bank 2',
      symptoms: 'Poor performance',
      possibleFixes: ['Check vacuum leaks', 'Check fuel system'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0174': DTCDefinition(
      code: 'P0174',
      description: 'System Too Lean (Bank 2)',
      cause: 'Same as P0171 but for Bank 2',
      symptoms: 'Rough idle, hesitation',
      possibleFixes: ['Check for vacuum leaks', 'Clean MAF sensor', 'Check fuel pressure'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),
    'P0175': DTCDefinition(
      code: 'P0175',
      description: 'System Too Rich (Bank 2)',
      cause: 'Same as P0172 but for Bank 2',
      symptoms: 'Black smoke, poor fuel economy',
      possibleFixes: ['Check fuel pressure', 'Inspect injectors'],
      severity: DTCSeverity.warning,
      category: 'Fuel System',
    ),

    // Misfire Codes - Critical
    'P0300': DTCDefinition(
      code: 'P0300',
      description: 'Random/Multiple Cylinder Misfire Detected',
      cause: 'Ignition system failure, vacuum leak, fuel delivery problem, or mechanical issue',
      symptoms: 'Rough idle, hesitation, flashing check engine light, loss of power',
      possibleFixes: ['Replace spark plugs and wires', 'Check ignition coils', 'Check for vacuum leaks', 'Inspect fuel injectors', 'Compression test'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0301': DTCDefinition(
      code: 'P0301',
      description: 'Cylinder 1 Misfire Detected',
      cause: 'Faulty spark plug, ignition coil, fuel injector, or low compression in cylinder 1',
      symptoms: 'Rough idle, loss of power, check engine light flashing',
      possibleFixes: ['Replace cylinder 1 spark plug', 'Replace cylinder 1 ignition coil', 'Check/replace fuel injector', 'Perform compression test'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0302': DTCDefinition(
      code: 'P0302',
      description: 'Cylinder 2 Misfire Detected',
      cause: 'Faulty spark plug, ignition coil, fuel injector, or low compression in cylinder 2',
      symptoms: 'Rough idle, loss of power, check engine light flashing',
      possibleFixes: ['Replace cylinder 2 spark plug', 'Replace cylinder 2 ignition coil', 'Check/replace fuel injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0303': DTCDefinition(
      code: 'P0303',
      description: 'Cylinder 3 Misfire Detected',
      cause: 'Faulty spark plug, ignition coil, fuel injector, or low compression in cylinder 3',
      symptoms: 'Rough idle, loss of power',
      possibleFixes: ['Replace cylinder 3 spark plug', 'Replace cylinder 3 ignition coil', 'Check/replace fuel injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0304': DTCDefinition(
      code: 'P0304',
      description: 'Cylinder 4 Misfire Detected',
      cause: 'Faulty spark plug, ignition coil, fuel injector, or low compression in cylinder 4',
      symptoms: 'Rough idle, loss of power',
      possibleFixes: ['Replace cylinder 4 spark plug', 'Replace cylinder 4 ignition coil', 'Check/replace fuel injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0305': DTCDefinition(
      code: 'P0305',
      description: 'Cylinder 5 Misfire Detected',
      cause: 'Ignition or fuel issue in cylinder 5',
      symptoms: 'Rough running',
      possibleFixes: ['Replace cylinder 5 spark plug/coil', 'Check injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0306': DTCDefinition(
      code: 'P0306',
      description: 'Cylinder 6 Misfire Detected',
      cause: 'Ignition or fuel issue in cylinder 6',
      symptoms: 'Rough running',
      possibleFixes: ['Replace cylinder 6 spark plug/coil', 'Check injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0307': DTCDefinition(
      code: 'P0307',
      description: 'Cylinder 7 Misfire Detected',
      cause: 'Ignition or fuel issue in cylinder 7',
      symptoms: 'Rough running',
      possibleFixes: ['Replace cylinder 7 spark plug/coil', 'Check injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0308': DTCDefinition(
      code: 'P0308',
      description: 'Cylinder 8 Misfire Detected',
      cause: 'Ignition or fuel issue in cylinder 8',
      symptoms: 'Rough running',
      possibleFixes: ['Replace cylinder 8 spark plug/coil', 'Check injector'],
      severity: DTCSeverity.critical,
      category: 'Misfire',
    ),
    'P0316': DTCDefinition(
      code: 'P0316',
      description: 'Engine Misfire Detected on Startup (First 1000 Revolutions)',
      cause: 'Cold start misfire, often fuel or ignition related',
      symptoms: 'Rough running when cold',
      possibleFixes: ['Check spark plugs', 'Check fuel injectors', 'Check fuel pressure'],
      severity: DTCSeverity.warning,
      category: 'Misfire',
    ),

    // Ignition System Codes
    'P0320': DTCDefinition(
      code: 'P0320',
      description: 'Ignition/Distributor Engine Speed Input Circuit',
      cause: 'Faulty crankshaft position sensor or wiring',
      symptoms: 'No start, stalling, tachometer erratic',
      possibleFixes: ['Replace crankshaft position sensor', 'Check wiring'],
      severity: DTCSeverity.critical,
      category: 'Ignition',
    ),
    'P0321': DTCDefinition(
      code: 'P0321',
      description: 'Ignition/Distributor Engine Speed Input Circuit Range/Performance',
      cause: 'Intermittent crankshaft sensor signal',
      symptoms: 'Intermittent stalling',
      possibleFixes: ['Replace crankshaft sensor', 'Check reluctor wheel'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0322': DTCDefinition(
      code: 'P0322',
      description: 'Ignition/Distributor Engine Speed Input Circuit No Signal',
      cause: 'No signal from crankshaft sensor',
      symptoms: 'No start condition',
      possibleFixes: ['Replace crankshaft sensor', 'Check wiring and connector'],
      severity: DTCSeverity.critical,
      category: 'Ignition',
    ),
    'P0325': DTCDefinition(
      code: 'P0325',
      description: 'Knock Sensor 1 Circuit (Bank 1)',
      cause: 'Faulty knock sensor or wiring',
      symptoms: 'Reduced power, pinging under load',
      possibleFixes: ['Replace knock sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0326': DTCDefinition(
      code: 'P0326',
      description: 'Knock Sensor 1 Circuit Range/Performance (Bank 1)',
      cause: 'Knock sensor signal out of range',
      symptoms: 'Engine knock, reduced power',
      possibleFixes: ['Replace knock sensor'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0327': DTCDefinition(
      code: 'P0327',
      description: 'Knock Sensor 1 Circuit Low (Bank 1)',
      cause: 'Low voltage in knock sensor circuit',
      symptoms: 'Engine may knock',
      possibleFixes: ['Check wiring', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0328': DTCDefinition(
      code: 'P0328',
      description: 'Knock Sensor 1 Circuit High (Bank 1)',
      cause: 'High voltage in knock sensor circuit',
      symptoms: 'Reduced timing, power loss',
      possibleFixes: ['Check wiring', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0330': DTCDefinition(
      code: 'P0330',
      description: 'Knock Sensor 2 Circuit (Bank 2)',
      cause: 'Faulty knock sensor Bank 2',
      symptoms: 'Knock, reduced power',
      possibleFixes: ['Replace knock sensor 2'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0335': DTCDefinition(
      code: 'P0335',
      description: 'Crankshaft Position Sensor A Circuit',
      cause: 'Faulty crankshaft position sensor or wiring',
      symptoms: 'No start, stalling, erratic engine performance',
      possibleFixes: ['Replace crankshaft position sensor', 'Check wiring', 'Inspect reluctor ring'],
      severity: DTCSeverity.critical,
      category: 'Ignition',
    ),
    'P0336': DTCDefinition(
      code: 'P0336',
      description: 'Crankshaft Position Sensor A Circuit Range/Performance',
      cause: 'Intermittent sensor signal or damaged reluctor',
      symptoms: 'Intermittent stalling, rough running',
      possibleFixes: ['Replace crankshaft sensor', 'Check reluctor ring for damage'],
      severity: DTCSeverity.critical,
      category: 'Ignition',
    ),
    'P0340': DTCDefinition(
      code: 'P0340',
      description: 'Camshaft Position Sensor Circuit (Bank 1)',
      cause: 'Faulty camshaft position sensor or wiring',
      symptoms: 'No start, stalling, rough idle',
      possibleFixes: ['Replace camshaft position sensor', 'Check wiring'],
      severity: DTCSeverity.critical,
      category: 'Ignition',
    ),
    'P0341': DTCDefinition(
      code: 'P0341',
      description: 'Camshaft Position Sensor Circuit Range/Performance (Bank 1)',
      cause: 'Intermittent signal or timing issues',
      symptoms: 'Hard starting, stalling',
      possibleFixes: ['Replace camshaft sensor', 'Check timing'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0345': DTCDefinition(
      code: 'P0345',
      description: 'Camshaft Position Sensor A Circuit (Bank 2)',
      cause: 'Faulty sensor Bank 2',
      symptoms: 'Running issues, no start',
      possibleFixes: ['Replace Bank 2 camshaft sensor'],
      severity: DTCSeverity.critical,
      category: 'Ignition',
    ),
    'P0350': DTCDefinition(
      code: 'P0350',
      description: 'Ignition Coil Primary/Secondary Circuit',
      cause: 'Ignition coil failure or wiring issue',
      symptoms: 'Misfire, rough running',
      possibleFixes: ['Replace ignition coil(s)', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0351': DTCDefinition(
      code: 'P0351',
      description: 'Ignition Coil A Primary/Secondary Circuit',
      cause: 'Coil 1 failure',
      symptoms: 'Cylinder 1 misfire',
      possibleFixes: ['Replace ignition coil A'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0352': DTCDefinition(
      code: 'P0352',
      description: 'Ignition Coil B Primary/Secondary Circuit',
      cause: 'Coil 2 failure',
      symptoms: 'Cylinder 2 misfire',
      possibleFixes: ['Replace ignition coil B'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0353': DTCDefinition(
      code: 'P0353',
      description: 'Ignition Coil C Primary/Secondary Circuit',
      cause: 'Coil 3 failure',
      symptoms: 'Cylinder 3 misfire',
      possibleFixes: ['Replace ignition coil C'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),
    'P0354': DTCDefinition(
      code: 'P0354',
      description: 'Ignition Coil D Primary/Secondary Circuit',
      cause: 'Coil 4 failure',
      symptoms: 'Cylinder 4 misfire',
      possibleFixes: ['Replace ignition coil D'],
      severity: DTCSeverity.warning,
      category: 'Ignition',
    ),

    // Catalyst System Codes
    'P0420': DTCDefinition(
      code: 'P0420',
      description: 'Catalyst System Efficiency Below Threshold (Bank 1)',
      cause: 'Catalytic converter efficiency reduced, could be worn catalyst or O2 sensor issue',
      symptoms: 'Failed emissions test, possible sulfur smell',
      possibleFixes: ['Replace catalytic converter', 'Check for exhaust leaks', 'Replace downstream O2 sensor', 'Check for engine misfires'],
      severity: DTCSeverity.warning,
      category: 'Emissions',
    ),
    'P0421': DTCDefinition(
      code: 'P0421',
      description: 'Warm Up Catalyst Efficiency Below Threshold (Bank 1)',
      cause: 'Catalyst not reaching efficiency during warm-up',
      symptoms: 'Emissions failure',
      possibleFixes: ['Replace catalytic converter'],
      severity: DTCSeverity.warning,
      category: 'Emissions',
    ),
    'P0430': DTCDefinition(
      code: 'P0430',
      description: 'Catalyst System Efficiency Below Threshold (Bank 2)',
      cause: 'Bank 2 catalytic converter efficiency reduced',
      symptoms: 'Failed emissions test',
      possibleFixes: ['Replace Bank 2 catalytic converter', 'Check O2 sensors'],
      severity: DTCSeverity.warning,
      category: 'Emissions',
    ),
    'P0440': DTCDefinition(
      code: 'P0440',
      description: 'Evaporative Emission System Malfunction',
      cause: 'Leak in EVAP system, faulty gas cap, or purge valve issue',
      symptoms: 'Check engine light, fuel odor',
      possibleFixes: ['Check gas cap', 'Smoke test EVAP system', 'Replace purge valve'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0441': DTCDefinition(
      code: 'P0441',
      description: 'Evaporative Emission System Incorrect Purge Flow',
      cause: 'Purge valve stuck or vacuum line issue',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace purge valve', 'Check vacuum lines'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0442': DTCDefinition(
      code: 'P0442',
      description: 'Evaporative Emission System Leak Detected (Small Leak)',
      cause: 'Small leak in EVAP system, often loose gas cap',
      symptoms: 'Check engine light, slight fuel odor',
      possibleFixes: ['Tighten or replace gas cap', 'Smoke test for leaks'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0443': DTCDefinition(
      code: 'P0443',
      description: 'Evaporative Emission System Purge Control Valve Circuit',
      cause: 'Faulty purge valve or wiring',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace purge valve', 'Check wiring'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0446': DTCDefinition(
      code: 'P0446',
      description: 'Evaporative Emission System Vent Control Circuit',
      cause: 'Faulty vent valve or wiring',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace vent valve', 'Check wiring'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0449': DTCDefinition(
      code: 'P0449',
      description: 'Evaporative Emission System Vent Valve/Solenoid Circuit',
      cause: 'Vent valve electrical issue',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace vent solenoid'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0451': DTCDefinition(
      code: 'P0451',
      description: 'Evaporative Emission System Pressure Sensor Range/Performance',
      cause: 'Faulty fuel tank pressure sensor',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace fuel tank pressure sensor'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0452': DTCDefinition(
      code: 'P0452',
      description: 'Evaporative Emission System Pressure Sensor Low',
      cause: 'Sensor circuit issue',
      symptoms: 'Check engine light',
      possibleFixes: ['Check wiring', 'Replace sensor'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0453': DTCDefinition(
      code: 'P0453',
      description: 'Evaporative Emission System Pressure Sensor High',
      cause: 'Sensor circuit issue',
      symptoms: 'Check engine light',
      possibleFixes: ['Check wiring', 'Replace sensor'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0455': DTCDefinition(
      code: 'P0455',
      description: 'Evaporative Emission System Leak Detected (Large Leak)',
      cause: 'Large leak in EVAP system, missing gas cap, or major hose disconnected',
      symptoms: 'Check engine light, fuel odor',
      possibleFixes: ['Check gas cap', 'Inspect EVAP hoses', 'Smoke test system'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),
    'P0456': DTCDefinition(
      code: 'P0456',
      description: 'Evaporative Emission System Leak Detected (Very Small Leak)',
      cause: 'Very small leak, often in gas cap seal',
      symptoms: 'Check engine light',
      possibleFixes: ['Replace gas cap', 'Smoke test for tiny leaks'],
      severity: DTCSeverity.info,
      category: 'EVAP',
    ),

    // EGR System
    'P0400': DTCDefinition(
      code: 'P0400',
      description: 'Exhaust Gas Recirculation Flow Malfunction',
      cause: 'Clogged EGR passages, faulty EGR valve, or vacuum issue',
      symptoms: 'Engine knock, rough idle, failed emissions',
      possibleFixes: ['Clean EGR valve and passages', 'Replace EGR valve', 'Check vacuum lines'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),
    'P0401': DTCDefinition(
      code: 'P0401',
      description: 'Exhaust Gas Recirculation Flow Insufficient',
      cause: 'Clogged EGR passages or stuck closed EGR valve',
      symptoms: 'Engine knock, ping under load',
      possibleFixes: ['Clean EGR passages', 'Replace EGR valve'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),
    'P0402': DTCDefinition(
      code: 'P0402',
      description: 'Exhaust Gas Recirculation Flow Excessive',
      cause: 'EGR valve stuck open',
      symptoms: 'Rough idle, stalling',
      possibleFixes: ['Clean or replace EGR valve'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),
    'P0403': DTCDefinition(
      code: 'P0403',
      description: 'Exhaust Gas Recirculation Circuit',
      cause: 'Electrical issue with EGR solenoid',
      symptoms: 'Check engine light',
      possibleFixes: ['Check wiring', 'Replace EGR solenoid'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),
    'P0404': DTCDefinition(
      code: 'P0404',
      description: 'Exhaust Gas Recirculation Circuit Range/Performance',
      cause: 'EGR position not matching commanded',
      symptoms: 'Performance issues',
      possibleFixes: ['Clean EGR valve', 'Replace EGR valve'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),
    'P0405': DTCDefinition(
      code: 'P0405',
      description: 'Exhaust Gas Recirculation Sensor A Circuit Low',
      cause: 'EGR position sensor issue',
      symptoms: 'Check engine light',
      possibleFixes: ['Check wiring', 'Replace EGR valve assembly'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),
    'P0406': DTCDefinition(
      code: 'P0406',
      description: 'Exhaust Gas Recirculation Sensor A Circuit High',
      cause: 'EGR position sensor issue',
      symptoms: 'Check engine light',
      possibleFixes: ['Check wiring', 'Replace EGR valve assembly'],
      severity: DTCSeverity.warning,
      category: 'EGR',
    ),

    // Fuel Injector Codes
    'P0200': DTCDefinition(
      code: 'P0200',
      description: 'Injector Circuit Malfunction',
      cause: 'Fuel injector driver circuit issue',
      symptoms: 'Rough running, misfires',
      possibleFixes: ['Check injector wiring', 'Test injectors', 'Check ECM'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0201': DTCDefinition(
      code: 'P0201',
      description: 'Injector Circuit Malfunction - Cylinder 1',
      cause: 'Cylinder 1 injector or wiring issue',
      symptoms: 'Cylinder 1 misfire, rough running',
      possibleFixes: ['Check wiring', 'Replace injector 1'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0202': DTCDefinition(
      code: 'P0202',
      description: 'Injector Circuit Malfunction - Cylinder 2',
      cause: 'Cylinder 2 injector or wiring issue',
      symptoms: 'Cylinder 2 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 2'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0203': DTCDefinition(
      code: 'P0203',
      description: 'Injector Circuit Malfunction - Cylinder 3',
      cause: 'Cylinder 3 injector or wiring issue',
      symptoms: 'Cylinder 3 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 3'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0204': DTCDefinition(
      code: 'P0204',
      description: 'Injector Circuit Malfunction - Cylinder 4',
      cause: 'Cylinder 4 injector or wiring issue',
      symptoms: 'Cylinder 4 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 4'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0205': DTCDefinition(
      code: 'P0205',
      description: 'Injector Circuit Malfunction - Cylinder 5',
      cause: 'Cylinder 5 injector or wiring issue',
      symptoms: 'Cylinder 5 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 5'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0206': DTCDefinition(
      code: 'P0206',
      description: 'Injector Circuit Malfunction - Cylinder 6',
      cause: 'Cylinder 6 injector or wiring issue',
      symptoms: 'Cylinder 6 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 6'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0207': DTCDefinition(
      code: 'P0207',
      description: 'Injector Circuit Malfunction - Cylinder 7',
      cause: 'Cylinder 7 injector or wiring issue',
      symptoms: 'Cylinder 7 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 7'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),
    'P0208': DTCDefinition(
      code: 'P0208',
      description: 'Injector Circuit Malfunction - Cylinder 8',
      cause: 'Cylinder 8 injector or wiring issue',
      symptoms: 'Cylinder 8 misfire',
      possibleFixes: ['Check wiring', 'Replace injector 8'],
      severity: DTCSeverity.warning,
      category: 'Fuel Injector',
    ),

    // Vehicle Speed Sensor
    'P0500': DTCDefinition(
      code: 'P0500',
      description: 'Vehicle Speed Sensor Malfunction',
      cause: 'Faulty vehicle speed sensor or wiring',
      symptoms: 'Speedometer not working, transmission shift issues',
      possibleFixes: ['Replace vehicle speed sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Speed Sensor',
    ),
    'P0501': DTCDefinition(
      code: 'P0501',
      description: 'Vehicle Speed Sensor Range/Performance',
      cause: 'Speed sensor signal out of expected range',
      symptoms: 'Erratic speedometer, shift issues',
      possibleFixes: ['Replace speed sensor', 'Check for interference'],
      severity: DTCSeverity.warning,
      category: 'Speed Sensor',
    ),
    'P0502': DTCDefinition(
      code: 'P0502',
      description: 'Vehicle Speed Sensor Circuit Low',
      cause: 'Low voltage in speed sensor circuit',
      symptoms: 'No speedometer reading',
      possibleFixes: ['Check wiring', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Speed Sensor',
    ),
    'P0503': DTCDefinition(
      code: 'P0503',
      description: 'Vehicle Speed Sensor Intermittent/Erratic/High',
      cause: 'Intermittent sensor signal',
      symptoms: 'Erratic speedometer',
      possibleFixes: ['Check connections', 'Replace sensor'],
      severity: DTCSeverity.warning,
      category: 'Speed Sensor',
    ),
    'P0504': DTCDefinition(
      code: 'P0504',
      description: 'Brake Switch A/B Correlation',
      cause: 'Brake switch circuit issue',
      symptoms: 'Cruise control issues, brake lights always on/off',
      possibleFixes: ['Adjust brake switch', 'Replace brake switch'],
      severity: DTCSeverity.warning,
      category: 'Brake System',
    ),
    'P0505': DTCDefinition(
      code: 'P0505',
      description: 'Idle Control System Malfunction',
      cause: 'Faulty idle air control valve or vacuum leak',
      symptoms: 'Erratic idle, stalling',
      possibleFixes: ['Clean IAC valve', 'Replace IAC valve', 'Check for vacuum leaks'],
      severity: DTCSeverity.warning,
      category: 'Idle Control',
    ),
    'P0506': DTCDefinition(
      code: 'P0506',
      description: 'Idle Control System RPM Lower Than Expected',
      cause: 'Idle speed too low, possible IAC or vacuum leak',
      symptoms: 'Low idle, stalling',
      possibleFixes: ['Clean throttle body', 'Check for vacuum leaks', 'Replace IAC'],
      severity: DTCSeverity.warning,
      category: 'Idle Control',
    ),
    'P0507': DTCDefinition(
      code: 'P0507',
      description: 'Idle Control System RPM Higher Than Expected',
      cause: 'Idle speed too high, possible vacuum leak or IAC issue',
      symptoms: 'High idle speed',
      possibleFixes: ['Check for vacuum leaks', 'Clean/replace IAC', 'Check throttle body'],
      severity: DTCSeverity.warning,
      category: 'Idle Control',
    ),

    // Transmission Codes
    'P0700': DTCDefinition(
      code: 'P0700',
      description: 'Transmission Control System Malfunction',
      cause: 'General transmission control module issue',
      symptoms: 'Check engine light, transmission warning light',
      possibleFixes: ['Scan for transmission codes', 'Check TCM', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0705': DTCDefinition(
      code: 'P0705',
      description: 'Transmission Range Sensor Circuit Malfunction (PRNDL Input)',
      cause: 'Faulty neutral safety switch or range sensor',
      symptoms: 'Incorrect gear indication, no start in Park/Neutral',
      possibleFixes: ['Replace range sensor', 'Adjust linkage'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0715': DTCDefinition(
      code: 'P0715',
      description: 'Input/Turbine Speed Sensor Circuit',
      cause: 'Faulty input speed sensor',
      symptoms: 'Harsh shifting, no shifts',
      possibleFixes: ['Replace input speed sensor'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0720': DTCDefinition(
      code: 'P0720',
      description: 'Output Speed Sensor Circuit',
      cause: 'Faulty output speed sensor',
      symptoms: 'Speedometer issues, shift problems',
      possibleFixes: ['Replace output speed sensor'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0730': DTCDefinition(
      code: 'P0730',
      description: 'Incorrect Gear Ratio',
      cause: 'Transmission internal issues, low fluid, or solenoid problem',
      symptoms: 'Slipping, incorrect shifts',
      possibleFixes: ['Check fluid level', 'Replace solenoids', 'Transmission rebuild'],
      severity: DTCSeverity.critical,
      category: 'Transmission',
    ),
    'P0731': DTCDefinition(
      code: 'P0731',
      description: 'Gear 1 Incorrect Ratio',
      cause: 'First gear slipping or not engaging properly',
      symptoms: 'First gear issues',
      possibleFixes: ['Check fluid', 'Possible internal damage'],
      severity: DTCSeverity.critical,
      category: 'Transmission',
    ),
    'P0732': DTCDefinition(
      code: 'P0732',
      description: 'Gear 2 Incorrect Ratio',
      cause: 'Second gear issues',
      symptoms: 'Second gear slipping',
      possibleFixes: ['Check fluid', 'Transmission service'],
      severity: DTCSeverity.critical,
      category: 'Transmission',
    ),
    'P0733': DTCDefinition(
      code: 'P0733',
      description: 'Gear 3 Incorrect Ratio',
      cause: 'Third gear issues',
      symptoms: 'Third gear slipping',
      possibleFixes: ['Check fluid', 'Transmission service'],
      severity: DTCSeverity.critical,
      category: 'Transmission',
    ),
    'P0734': DTCDefinition(
      code: 'P0734',
      description: 'Gear 4 Incorrect Ratio',
      cause: 'Fourth gear issues',
      symptoms: 'Fourth gear slipping',
      possibleFixes: ['Check fluid', 'Transmission service'],
      severity: DTCSeverity.critical,
      category: 'Transmission',
    ),
    'P0740': DTCDefinition(
      code: 'P0740',
      description: 'Torque Converter Clutch Circuit Malfunction',
      cause: 'TCC solenoid failure or wiring issue',
      symptoms: 'Poor fuel economy, no lockup',
      possibleFixes: ['Replace TCC solenoid', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0741': DTCDefinition(
      code: 'P0741',
      description: 'Torque Converter Clutch Circuit Performance or Stuck Off',
      cause: 'TCC not engaging, solenoid stuck',
      symptoms: 'Higher engine RPM on highway, poor fuel economy',
      possibleFixes: ['Replace TCC solenoid', 'Transmission fluid service'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0750': DTCDefinition(
      code: 'P0750',
      description: 'Shift Solenoid A Malfunction',
      cause: 'Shift solenoid A failure',
      symptoms: 'Shift issues',
      possibleFixes: ['Replace shift solenoid A'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0755': DTCDefinition(
      code: 'P0755',
      description: 'Shift Solenoid B Malfunction',
      cause: 'Shift solenoid B failure',
      symptoms: 'Shift issues',
      possibleFixes: ['Replace shift solenoid B'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),
    'P0760': DTCDefinition(
      code: 'P0760',
      description: 'Shift Solenoid C Malfunction',
      cause: 'Shift solenoid C failure',
      symptoms: 'Shift issues',
      possibleFixes: ['Replace shift solenoid C'],
      severity: DTCSeverity.warning,
      category: 'Transmission',
    ),

    // ============================================
    // B0xxx - Body Codes
    // ============================================
    'B0001': DTCDefinition(
      code: 'B0001',
      description: 'Driver Frontal Stage 1 Deployment Control',
      cause: 'Airbag deployment circuit issue',
      symptoms: 'Airbag warning light',
      possibleFixes: ['Professional diagnosis required', 'Check airbag wiring'],
      severity: DTCSeverity.critical,
      category: 'Airbag',
    ),
    'B0100': DTCDefinition(
      code: 'B0100',
      description: 'Electronic Frontal Sensor 1',
      cause: 'Front crash sensor issue',
      symptoms: 'Airbag warning light',
      possibleFixes: ['Replace crash sensor', 'Check wiring'],
      severity: DTCSeverity.critical,
      category: 'Airbag',
    ),

    // ============================================
    // C0xxx - Chassis Codes
    // ============================================
    'C0035': DTCDefinition(
      code: 'C0035',
      description: 'Left Front Wheel Speed Sensor Circuit',
      cause: 'Faulty wheel speed sensor or wiring',
      symptoms: 'ABS light on, ABS not functioning',
      possibleFixes: ['Replace wheel speed sensor', 'Check wiring', 'Check reluctor ring'],
      severity: DTCSeverity.warning,
      category: 'ABS',
    ),
    'C0040': DTCDefinition(
      code: 'C0040',
      description: 'Right Front Wheel Speed Sensor Circuit',
      cause: 'Faulty wheel speed sensor or wiring',
      symptoms: 'ABS light on',
      possibleFixes: ['Replace wheel speed sensor', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'ABS',
    ),
    'C0045': DTCDefinition(
      code: 'C0045',
      description: 'Left Rear Wheel Speed Sensor Circuit',
      cause: 'Faulty wheel speed sensor',
      symptoms: 'ABS light on',
      possibleFixes: ['Replace wheel speed sensor'],
      severity: DTCSeverity.warning,
      category: 'ABS',
    ),
    'C0050': DTCDefinition(
      code: 'C0050',
      description: 'Right Rear Wheel Speed Sensor Circuit',
      cause: 'Faulty wheel speed sensor',
      symptoms: 'ABS light on',
      possibleFixes: ['Replace wheel speed sensor'],
      severity: DTCSeverity.warning,
      category: 'ABS',
    ),
    'C0242': DTCDefinition(
      code: 'C0242',
      description: 'PCM Indicated Requested Torque Malfunction',
      cause: 'Communication issue between modules',
      symptoms: 'Traction control issues',
      possibleFixes: ['Check CAN bus', 'Check module communication'],
      severity: DTCSeverity.warning,
      category: 'Stability Control',
    ),

    // ============================================
    // U0xxx - Network Codes
    // ============================================
    'U0001': DTCDefinition(
      code: 'U0001',
      description: 'High Speed CAN Communication Bus',
      cause: 'CAN bus communication failure',
      symptoms: 'Multiple warning lights, erratic behavior',
      possibleFixes: ['Check CAN bus wiring', 'Check module grounds', 'Check for damaged wiring'],
      severity: DTCSeverity.critical,
      category: 'Network',
    ),
    'U0100': DTCDefinition(
      code: 'U0100',
      description: 'Lost Communication With ECM/PCM "A"',
      cause: 'No communication with engine control module',
      symptoms: 'No start, multiple warning lights',
      possibleFixes: ['Check ECM power and ground', 'Check CAN bus', 'Replace ECM'],
      severity: DTCSeverity.critical,
      category: 'Network',
    ),
    'U0101': DTCDefinition(
      code: 'U0101',
      description: 'Lost Communication With TCM',
      cause: 'No communication with transmission control module',
      symptoms: 'Transmission warning light, limp mode',
      possibleFixes: ['Check TCM power and ground', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Network',
    ),
    'U0121': DTCDefinition(
      code: 'U0121',
      description: 'Lost Communication With ABS Module',
      cause: 'No communication with ABS module',
      symptoms: 'ABS light on, stability control off',
      possibleFixes: ['Check ABS module', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Network',
    ),
    'U0140': DTCDefinition(
      code: 'U0140',
      description: 'Lost Communication With BCM',
      cause: 'No communication with body control module',
      symptoms: 'Various body functions not working',
      possibleFixes: ['Check BCM', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Network',
    ),
    'U0155': DTCDefinition(
      code: 'U0155',
      description: 'Lost Communication With Instrument Panel Cluster',
      cause: 'No communication with gauge cluster',
      symptoms: 'Gauges not working',
      possibleFixes: ['Check cluster', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Network',
    ),
    'U0401': DTCDefinition(
      code: 'U0401',
      description: 'Invalid Data Received From ECM/PCM',
      cause: 'Corrupt data from engine module',
      symptoms: 'Performance issues',
      possibleFixes: ['Check ECM', 'Check wiring'],
      severity: DTCSeverity.warning,
      category: 'Network',
    ),
  };

  /// Get all DTC codes
  List<DTCDefinition> get allCodes => _database.values.toList();

  /// Get total number of codes in database
  int get codeCount => _database.length;
}
